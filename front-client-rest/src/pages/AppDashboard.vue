<script setup>
import { useRouter } from "vue-router";
import { useCartStore } from "../store/cart";

const cartStore = useCartStore();
const router = useRouter();
</script>

<template>
  <div class="app-dashboard">
    <div class="cart-icon" @click="router.push(`/dashboard/cart`)">
      <div class="cart-badge" v-if="cartStore?.items?.length">
        {{ cartStore?.items?.length }}
      </div>
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M2.14199 2.00013L4.00999 14.136C4.04359 14.3779 4.16437 14.5992 4.34961 14.7583C4.53485 14.9174 4.77182 15.0033 5.01598 15H15.9999C16.2151 15.0001 16.4245 14.9307 16.5971 14.8022C16.7696 14.6738 16.8962 14.4931 16.9579 14.287L19.9579 4.28711C20.0027 4.1378 20.0119 3.9801 19.9848 3.8266C19.9578 3.6731 19.8952 3.52805 19.8022 3.40301C19.7091 3.27798 19.5881 3.17644 19.4488 3.10649C19.3095 3.03654 19.1558 3.00011 18.9999 3.00012H4.31998L3.98999 0.862137C3.95665 0.617378 3.83329 0.39383 3.64399 0.235142C3.45966 0.0795467 3.22517 -0.0039445 2.98399 0.000143297H0.999996C0.868675 0.000143294 0.738639 0.0260088 0.617314 0.0762631C0.495989 0.126517 0.38575 0.200176 0.292892 0.293034C0.200034 0.385892 0.126375 0.496131 0.0761201 0.617455C0.0258656 0.73878 0 0.868815 0 1.00014C0 1.13146 0.0258656 1.26149 0.0761201 1.38282C0.126375 1.50414 0.200034 1.61438 0.292892 1.70724C0.38575 1.8001 0.495989 1.87375 0.617314 1.92401C0.738639 1.97426 0.868675 2.00013 0.999996 2.00013H2.14199ZM5.85798 13L4.62798 5.00011H17.6559L15.2559 13H5.85798ZM7.99997 18C7.99997 18.5304 7.78926 19.0391 7.41419 19.4142C7.03912 19.7893 6.53041 20 5.99998 20C5.46955 20 4.96084 19.7893 4.58577 19.4142C4.2107 19.0391 3.99999 18.5304 3.99999 18C3.99999 17.4696 4.2107 16.9609 4.58577 16.5858C4.96084 16.2107 5.46955 16 5.99998 16C6.53041 16 7.03912 16.2107 7.41419 16.5858C7.78926 16.9609 7.99997 17.4696 7.99997 18ZM16.9999 18C16.9999 18.5304 16.7892 19.0391 16.4142 19.4142C16.0391 19.7893 15.5304 20 14.9999 20C14.4695 20 13.9608 19.7893 13.5857 19.4142C13.2107 19.0391 13 18.5304 13 18C13 17.4696 13.2107 16.9609 13.5857 16.5858C13.9608 16.2107 14.4695 16 14.9999 16C15.5304 16 16.0391 16.2107 16.4142 16.5858C16.7892 16.9609 16.9999 17.4696 16.9999 18Z"
          fill="black"
          fill-opacity="0.43"
        />
      </svg>
    </div>
    <RouterView />
  </div>
</template>

<style scoped>
.app-dashboard {
  display: flex;
  flex-direction: column;
  height: calc(100% - 87px);
  overflow-y: scroll;
}
.cart-icon {
  margin: 25px;
  cursor: pointer;
  position: relative;
  margin-left: auto;
}

.cart-badge {
  position: absolute;
  top: -10px;
  right: -13px;
  color: white;
  background-color: #685ed7;
  height: 20px;
  width: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 50%;
  font-size: 12px;
}
</style>
